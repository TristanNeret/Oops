<?xml version="1.0" encoding="UTF-8"?>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
      xmlns:p="http://primefaces.org/ui"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets">

    <h:head>
        <title>Contractor list</title>
        <h:outputStylesheet library="css" name="style.css" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    </h:head>

    <h:body>

        <!-- HEADER -->
        <ui:include src="/includes/header.xhtml" />

        <!-- SEARCH -->
        <ui:include src="/includes/search.xhtml" />

        <div style="width : 50%; margin : auto; ">
            <h:outputText id="noResultOutputText" value="Aucun résultat ne correspond aux critères de recherche !" 
                          rendered="#{empty searchManagedBean.lc}"/>
        </div>

        <h:panelGroup rendered ="#{searchManagedBean.lc.size() ge 2}">

            <fieldset width="100%" style="margin: 0px;">
                <h:form>
                    <h:outputText value="Trier par : " />
                    <h:selectOneMenu id ="listOrder" value="#{searchManagedBean.order}" onchange="submit()"
                                     valueChangeListener="#{searchManagedBean.valueChangeMethod}">
                        <f:selectItems value="#{searchManagedBean.orders}" />
                    </h:selectOneMenu>
                </h:form>
            </fieldset>
        </h:panelGroup>

        <!-- CONTENT -->
        <div class="divContent">
            <table width="100%" style="margin: 0px;">
                <c:forEach items="#{searchManagedBean.lc}" var="contractor" rendered="#{not empty searchManagedBean.lc}">
                    <tr>
                       <td>
                        <fieldset id="listContractor" style="margin-top: 10px;"> 
                            <h:graphicImage value="#{contractor.logo}" height="75px" style="float: left;"/>
                            <h:outputText style="font-size: x-large; padding-right: 25px; padding-left: 20px;" 
                                          value="#{contractor.socialReason}"/> 
                            <h:outputText value="#{contractor.address.town}" /> 
                            (<h:outputText value="#{contractor.address.zipCode}" />)
                            <div style="float: right;">
                                <div>
                                    <h:outputText value="Note moyenne : " /> 
                                    <p:rating id="stars1" value="#{contractor.rating}" stars="5" readonly="true"/>
                                </div>
                                <div>
                                    <h:button class="headerCommandButton" value="Voir #{contractor.socialReason}" 
                                              outcome="/views/contractorInformation?id=#{contractor.id}" />
                                </div>

                            </div>
                        </fieldset> 
                        <h:outputText style="padding-left: 10px; margin-bottom: 20px;" value="#{contractor.description}" /> 
                       </td>

                    </tr>
                </c:forEach>
            </table>
        </div>

    </h:body>

    <!-- FOOTER -->
    <ui:include src="/includes/footer.xhtml" />

</html>
