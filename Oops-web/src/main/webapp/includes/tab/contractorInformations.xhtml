<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition 
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:f="http://xmlns.jcp.org/jsf/core"
    xmlns:h="http://xmlns.jcp.org/jsf/html"
    xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
    xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
    xmlns:p="http://primefaces.org/ui">
    
    
    
    <h:panelGroup rendered="#{!contractorEditBean.contractorModif}">
        
        <p>
            <h:outputLabel for="login" class="labelModificationForm"> Login: </h:outputLabel>
            <h:outputText  id="login" value="#{contractorEditBean.contractor.login}"/>
        </p>    
        
        <p>
            <h:outputLabel for="firstName" class="labelModificationForm"> Prénom: </h:outputLabel>
            <h:outputText  id="firstName" value="#{contractorEditBean.contractor.representatorFirstname}"/>
        </p>
        
        <p>
            <h:outputLabel for="lastName" class="labelModificationForm"> Nom: </h:outputLabel>
            <h:outputText  id="lastName" value="#{contractorEditBean.contractor.representatorLastname}"/>
        </p>

        <p>
            <h:outputLabel for="email" class="labelModificationForm"> Email : </h:outputLabel>
            <h:outputText  id="email" value="#{contractorEditBean.contractor.email}"/>
        </p>

        <p>
            <h:outputLabel for="phoneNumber" class="labelModificationForm"> Phone : </h:outputLabel>
            <h:outputText  id="phoneNumber" value="#{contractorEditBean.contractor.phone}"/> 
        </p>
                      
        <h:form>
            <h:commandButton class="searchCommandButton"  value="Modifier" action="#{contractorEditBean.setContractorModif(true)}">
            </h:commandButton>    
        </h:form>
    
    </h:panelGroup>
                  
  
    <h:panelGroup id="text">

        <h:panelGroup rendered="#{contractorEditBean.contractorModif}">
     
        <div id="maDivGauche" style="float:left; " >
         
            <h:form>
          
                
                <p>
                    <h:outputLabel for="modifiedLogin" class="labelModificationForm"> Login: </h:outputLabel>
                    <p:inputText   id="modifiedLogin" value="#{contractorEditBean.contractor.login}">
                        <f:ajax  event="blur" render="loginMessage"/>
                        <f:validator validatorId="com.gdf.loginAlreadyExistForModificationValidator"/>
                        <f:attribute value="#{contractorEditBean.contractor.id}" name="idContractor"/>
                    </p:inputText>
                    <h:message id="loginMessage" for="modifiedLogin" errorClass="erreur" />
                </p>
             
               
                <p>
                    <h:outputLabel for="modifiedFirstName" class="labelModificationForm"> Prénom: </h:outputLabel>
                    <p:inputText  id="modifiedFirstName" value="#{contractorEditBean.contractor.representatorFirstname}">
                        <f:ajax  event="blur" render="firstNameMessage"/>
                    </p:inputText>
                    <h:message id="firstNameMessage" for="modifiedFirstName" errorClass="erreur"  />
                </p>
                
                <p>
                <h:outputLabel for="modifiedLastName" class="labelModificationForm"> Nom: </h:outputLabel>
                <p:inputText  id="modifiedLastName" value="#{contractorEditBean.contractor.representatorLastname}">
                    <f:ajax  event="blur" render="lastNameMessage"/>
                </p:inputText>
                <h:message id="lastNameMessage" for="modifiedLastName" errorClass="erreur" />
                </p>
                
                <p>
                <h:outputLabel for="modifiedEmail" class="labelModificationForm"> Email : </h:outputLabel>
                <p:inputText  id="modifiedEmail" value="#{contractorEditBean.contractor.email}">
                    <f:ajax  event="blur" render="emailMessage"/>
                    <f:validator validatorId="com.gdf.mailFormatValidator"/>
                </p:inputText>    
                <h:message id="emailMessage" for="modifiedEmail" errorClass="erreur" />
                </p>
                
                <p>
                <h:outputLabel for="modifiedPhoneNumber" class="labelModificationForm"> Phone : </h:outputLabel>
                <p:inputText  id="modifiedPhoneNumber" value="#{contractorEditBean.contractor.phone}">
                    <f:validator validatorId="com.gdf.phoneFormatValidator"/>
                    <f:ajax  event="blur" render="phoneMessage"/>
                </p:inputText>
                </p>
                
                <h:message id="phoneMessage" for="modifiedPhoneNumber" errorClass="erreur" />
              
                 
                <h:commandButton class="searchCommandButton" value="Enregistrer" action="#{contractorEditBean.update}"></h:commandButton>    
       
            
            </h:form>   
        
         
            <h:form>
                <h:commandButton class="searchCommandButton" value="Annuler" action="#{contractorEditBean.undo}"></h:commandButton>    
            </h:form> 
       
              
            </div>
            <div id="maDivDroite" style="float:right;width: 50%; ">
            <br/>
            <h:form >
            
                <p>
                <h:outputLabel value ="" for="password" class="labelModificationForm" >Mot de passe</h:outputLabel>
                <h:inputSecret id="password" value="#{contractorEditBean.contractor.password}" size="20" maxlength="20" binding="#{composantMotDePasse}" >
                    <f:ajax event="blur" execute="password confirmationPassword" render="passwordMessage confirmationPasswordMessage" />
                </h:inputSecret>  
                <h:message id="passwordMessage" for="password" errorClass="erreur" />
                </p>

                <p>
                <h:outputLabel for="confirmationPassword" class="labelModificationForm">Confirmation du mot de passe</h:outputLabel>
                <h:inputSecret id="confirmationPassword" value="#{contractorEditBean.contractor.password}" size="20" maxlength="20">
                    <f:validator validatorId="passwordConfirmationValidator" />
                    <f:attribute name="composantMotDePasse" value="#{composantMotDePasse}" />
                    <f:ajax event="blur" execute="password confirmationPassword" render="passwordMessage confirmationPasswordMessage" /> 
                </h:inputSecret> 
                <h:message id="confirmationPasswordMessage" for="confirmationPassword" errorClass="erreur" />
                </p>
               
                <h:commandButton class="searchCommandButton" value="Modifier" action="#{contractorEditBean.update}"></h:commandButton>    
    
            </h:form>        
                 
       
    </div>
    </h:panelGroup> 
    </h:panelGroup>    
        
  
        
</ui:composition>
