<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition 
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:f="http://xmlns.jcp.org/jsf/core"
    xmlns:h="http://xmlns.jcp.org/jsf/html"
    xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
    xmlns:p="http://primefaces.org/ui"
    xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
    xmlns:t="http://xmlns.jcp.org/jsf/passthrough">

    <script type="text/javascript">
        function handleModifCompanyInfosRequest(xhr, status, args) {
            if (args.validationFailed) {
                
            } else {
                PF('modifOKGrowl').renderMessage({summary: 'Modification effectuée !',
                    detail: 'Les informations de votre entreprise ont été mis à jour !',
                    severity: 'info'});
            }
        }
    </script>

    <div style="float:left; ">
        
   

        <!--
        <h:form id="viewForm">

            <h:panelGrid columns="2">

                <h:outputLabel value="Raison sociale : "  />
                <h:outputText  id="socialReasonOT" value="#{contractorEditBean.contractor.socialReason}" />

                <h:outputLabel value="Forme juridique :"  />
                <h:outputText  id="legalFormOT" value="#{contractorEditBean.contractor.legalForm}" />

                <h:outputLabel value="Chiffres d'affaire : "  />
                <h:outputText  id="turnoverOT" value="#{contractorEditBean.contractor.turnover}" />

                <h:outputLabel value="Nombres d'employes : "  />
                <h:outputText  id="nbEmployeesOT" value="#{contractorEditBean.contractor.nbEmployees}" />

                <h:outputLabel value="SIREN : "/>
                <h:outputText  id="sirenOT" value="#{contractorEditBean.contractor.legalInformation.siren}" />

                <h:outputLabel value="SIRET : "/>
                <h:outputText  id="siretOT" value="#{contractorEditBean.contractor.legalInformation.siret}" />

                <h:outputLabel value="Assurance : "/>
                <h:outputText  id="insurranceOT" value="#{contractorEditBean.contractor.legalInformation.insurrance}" />

                <h:outputLabel value="RCS : "/>
                <h:outputText  id="rcsOT" value="#{contractorEditBean.contractor.legalInformation.rcs}" />

            </h:panelGrid>

            <p:commandButton  value="Modifier" />

        </h:form> -->

        <h:form id="editForm">
            
            <p:growl widgetVar="modifOKGrowl" sticky="false" showDetail="true" life="3000" />

            <h:panelGrid id="grid" columns="3" cellpadding="5" >

                <h:outputLabel for="socialReasonIT" value="Raison sociale : " class="labelModificationForm" />
                <p:inputText  id="socialReasonIT" required="true" value="#{contractorEditBean.contractor.socialReason}" >
                    <f:ajax  event="blur" render="socialReasonMessage"/>
                        <f:validator validatorId="com.gdf.noBlankSpaceValidator"/>
                </p:inputText>
                <h:message id="socialReasonMessage" for="socialReasonIT" errorClass="erreur" />
                
                <h:outputLabel for="legalFormIT" value="Forme juridique :" class="labelModificationForm" />
                <p:inputText  id="legalFormIT" required="true" value="#{contractorEditBean.contractor.legalForm}">
                    <f:ajax  event="blur" render="legalFormMessage"/>
                        <f:validator validatorId="com.gdf.noBlankSpaceValidator"/>
                </p:inputText>
                <h:message id="legalFormMessage" for="legalFormIT" errorClass="erreur" />

                <h:outputLabel for="turnoverIT" value="Chiffre d'affaire : " class="labelModificationForm" />
                <p:inputText  id="turnoverIT" required="true" value="#{contractorEditBean.contractor.turnover}">
                    <f:ajax  event="blur" render="turnoverMessage"/>
                        <f:validator validatorId="com.gdf.noBlankSpaceValidator"/>
                </p:inputText>
                <h:message id="turnoverMessage" for="turnoverIT" errorClass="erreur" />
                
                <h:outputLabel for="nbEmployeesIT" value="Nombres d'employés : " class="labelModificationForm" />
                <p:inputText  id="nbEmployeesIT" required="true" value="#{contractorEditBean.contractor.nbEmployees}">
                    <f:ajax  event="blur" render="nbEmployeesMessage"/>
                        <f:validator validatorId="com.gdf.noBlankSpaceValidator"/>
                </p:inputText>
                <h:message id="nbEmployeesMessage" for="nbEmployeesIT" errorClass="erreur" />
                

                <h:outputLabel for="sirenIT" value="N° SIREN : " class="labelModificationForm" />
                <p:inputText  id="sirenIT" required="true" value="#{contractorEditBean.contractor.legalInformation.siren}" size="9" 
                              maxlength="9">
                    <f:ajax  event="blur" render="sirenMessage"/>
                        <f:validator validatorId="com.gdf.noBlankSpaceValidator"/>
                </p:inputText>
                <h:message id="sirenMessage" for="sirenIT" errorClass="erreur" />
                

                <h:outputLabel for="siretIT" value="N° SIRET : " class="labelModificationForm" />
                <p:inputText  id="siretIT" required="true" value="#{contractorEditBean.contractor.legalInformation.siret}" size="14" 
                              maxlength="14">
                    <f:ajax  event="blur" render="siretMessage"/>
                        <f:validator validatorId="com.gdf.noBlankSpaceValidator"/>
                </p:inputText>
                <h:message id="siretMessage" for="siretIT" errorClass="erreur" />
                
                <h:outputLabel for="insurranceIT" value="Assurance : " class="labelModificationForm" />
                <p:inputText  id="insurranceIT" required="true" value="#{contractorEditBean.contractor.legalInformation.insurrance}">
                    <f:ajax  event="blur" render="insurranceMessage"/>
                        <f:validator validatorId="com.gdf.noBlankSpaceValidator"/>
                </p:inputText>
                <h:message id="insurranceMessage" for="insurranceIT" errorClass="erreur" />
                

                <h:outputLabel for="rcsIT" value="N° RCS : " class="labelModificationForm" />
                <p:inputText  id="rcsIT" required="true" value="#{contractorEditBean.contractor.legalInformation.rcs}">
                    <f:ajax  event="blur" render="rcsMessage"/>
                        <f:validator validatorId="com.gdf.noBlankSpaceValidator"/>
                </p:inputText>
                <h:message id="rcsMessage" for="rcsIT" errorClass="erreur" />
                

            </h:panelGrid>

            <p:commandButton  value="Enregistrer" id="saveButton"
                              actionListener="#{contractorEditBean.update()}"
                              oncomplete="handleModifCompanyInfosRequest(xhr, status, args)" />

        </h:form>
        
        <h:form>
            
            <p:commandButton  value="Annuler" id="cancelButton" 
                              action="#{contractorEditBean.undo()}"/>
        </h:form>

    </div>

</ui:composition>