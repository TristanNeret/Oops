<?xml version="1.0" encoding="UTF-8"?>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<!DOCTYPE html>
<ui:composition 
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
    xmlns:p="http://primefaces.org/ui"
    xmlns:o="http://omnifaces.org/ui"
    xmlns:ui="http://xmlns.jcp.org/jsf/facelets">

    <script type="text/javascript">
        function handleRegisterRequest(xhr, status, args) {
            if (args.validationFailed) {
                PF('registerDialog').jq.effect("shake", {times: 5}, 100);
            }
            else {
                PF('registerDialog').hide();
                PF('registerGrowlError').renderMessage({summary: 'Inscription réussie !', detail: 'Bienvenue sur Oops !', severity: 'info'});
            }
        }
    </script>

    <div id="divHeader">

        <p:growl widgetVar="registerGrowlError" sticky="false" showDetail="true" life="3000" />
        <p:growl widgetVar="contractorRegisterGrowlError" sticky="false" showDetail="true" life="3000" />

        <p:panelGrid styleClass="panelHeader" columns="3">

            <h:link styleClass="headerTitle" value="Oops" outcome="/admin.xhtml"/>
            <h:link styleClass="headerSubtitle" value="Opinion on providers of services" outcome="/admin.xhtml"/>

            <p:panelGrid styleClass="panelHeaderButton" columns="3">

                <!-- NOTIFICATION -->
                <h:form class="formNotificationHeader">
                    <p:commandLink id="commandButtonNotifications" >
                        <h:graphicImage library="default" height="40px" onmouseover="this.src = '#{manageNotificationBean.getNotificationImageURL(0)}';" onmouseout="this.src = '#{manageNotificationBean.getNotificationImageURL(1)}'" name="#{manageNotificationBean.notificationImageName}" />
                    </p:commandLink>
                    <p:overlayPanel id="notificationPanel" styleClass="overlayPanelNotification" appendToBody="true" for="commandButtonNotifications" dynamic="false">
                        <div id="divTitleNotification">
                            Notifications
                        </div>
                        <div id="divNotificationList">
                            <h:outputLabel styleClass="titlePanelReviewAdmin" value="Pas de nouvelles notifiactions." rendered="#{!manageNotificationBean.unreadNotifications}" /> 
                            <div class="divNotification">
                                <c:forEach items="#{manageNotificationBean.notificationsList}" var="notification" rendered="#{manageNotificationBean.unreadNotifications}" >
                                    <p:commandButton class="commandButtonClickNotification" styleClass="commandButtonClickNotification" value="#{notification.description}&#10;#{notification.date}" update="@form" action="#{manageNotificationBean.clickOnNotification(notification)}">
                                    </p:commandButton>
                                </c:forEach>
                            </div>
                            <div class="divNotification">
                                <p:commandButton id="commandButtonClearNotifications" styleClass="commandButtonClearNotification" value="Tout marquer comme lu" action="#{manageNotificationBean.markAsRead()}" update="@form" rendered="#{manageNotificationBean.unreadNotifications}">
                                </p:commandButton>
                            </div>
                        </div>
                    </p:overlayPanel>
                </h:form>

                <h:button class="headerCommandButton" value="Connexion (Modérateurs)" />

            </p:panelGrid>

        </p:panelGrid>

    </div>

</ui:composition>