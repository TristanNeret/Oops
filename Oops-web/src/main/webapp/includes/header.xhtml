<?xml version="1.0" encoding="UTF-8"?>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<!DOCTYPE html>
<ui:composition 
    xmlns="http://www.w3.org/1999/xhtml"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
      xmlns:p="http://primefaces.org/ui"
      xmlns:o="http://omnifaces.org/ui"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets">
    
    <script type="text/javascript">
        function handleRegisterRequest(xhr, status, args) {
            if(args.validationFailed) {
                PF('registerDialog').jq.effect("shake", {times:5}, 100);
            }
            else {
                PF('registerDialog').hide();
                PF('registerGrowlError').renderMessage({summary:'Inscription réussie !', detail: 'Bienvenue sur Oops !', severity: 'info'});
            }
        }
    </script>
    
    <div id="divHeader">
        <h:link id="headerTitle" value="Oops" outcome="index"/>
        <h:link id="headerSubtitle" value="Opinion on providers of services" outcome="index"/>
        <h:button class="headerCommandButton" value="Connexion" />
        
        <!-- DIALOG BOX FOR INSCRIPTION -->
        <o:form id="registerForm" includeViewParams="true">
            <p:growl widgetVar="registerGrowlError" sticky="false" showDetail="true" life="3000" />
            <p:commandButton class="headerCommandButton" style="margin-top: -35px;" value="Inscription" onclick="PF('registerDialog').show();"  type="button">
                <!-- Reset fields on opening -->
                <p:ajax update="registerLogin" resetValues="true" />
                <p:ajax update="registerMDP" resetValues="true" />
                <p:ajax update="registerConfirmMDP" resetValues="true" />
                <p:ajax update="registerMail" resetValues="true" />
                <p:ajax update="registerName" resetValues="true" />
                <p:ajax update="registerFirstName" resetValues="true" />
                <p:ajax update="registerPhoneNumber" resetValues="true" />
                <p:ajax update="registerAvatar" resetValues="true" />
            </p:commandButton>
            <p:growl id="registerGrowl" sticky="false" showDetail="false" life="3000" />
            <p:dialog header="Inscription" widgetVar="registerDialog" resizable="false">
                <h:panelGrid columns="2" cellpadding="5">
                    <h:outputLabel value="Inscrivez-vous sur le plus grand annuaire de prestataires du web !" /><h:outputLabel value=""></h:outputLabel>
                    
                    <h:outputLabel value="Login :" />
                    <p:inputText id="registerLogin" value="#{tendererRegisterBean.login}" required="true" label="Login" />
                    
                    <h:outputLabel value="Mot de passe :" />
                    <p:password id="registerMDP" value="#{tendererRegisterBean.password}" feedback="true" required="true" label="Mot de passe" />
                    
                    <h:outputLabel value="Confirmer le mote de passe :" />
                    <p:password id="registerConfirmMDP" value="#{tendererRegisterBean.passwordConfirm}" feedback="true" required="true" label="Confirmation du mot de passe" />
                    
                    <h:outputLabel value="Adresse mail :" />
                    <p:inputText id="registerMail" value="#{tendererRegisterBean.email}" required="true" label="Mail" />
                    
                    <h:outputLabel value="Nom :" />
                    <p:inputText id="registerName" value="#{tendererRegisterBean.lastname}" required="true" label="Nom" />
                    
                    <h:outputLabel value="Prénom :" />
                    <p:inputText id="registerFirstName" value="#{tendererRegisterBean.firstname}" required="true" label="Prénom" />
                    
                    <h:outputLabel value="Téléphone :" />
                    <p:inputText id="registerPhoneNumber" value="#{tendererRegisterBean.phone}" required="false" label="Téléphone" />
                    
                    <h:outputLabel value="Avatar :" />
                    <p:inputText id="registerAvatar" value="#{tendererRegisterBean.avatar}" required="false" label="Avatar" />

                    <f:facet name="footer">
                        <p:commandButton value="S'inscrire" update="registerGrowl"  actionListener="#{tendererRegisterBean.submit}" 
                                         oncomplete="handleRegisterRequest(xhr, status, args)" />
                    </f:facet>  
                </h:panelGrid>
            </p:dialog>
        </o:form>
        
        <h:button class="headerCommandButton" style="margin-top: -35px;" value="Prestatire ? Inscrivez-vous ici !" />
    </div>
    
</ui:composition>